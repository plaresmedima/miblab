SOPs for maintainers
********************

Building a virtual environment
------------------------------

Clone miblab folder locally

cd to miblab top folder

On windows:
>>> python -m venv .venv           # create virtual environment
>>> .venv/Scripts/activate        # activate virtual environment

Then select the Python interpreter in the .venv folder. In VSCode:
View > Command Palette > Python select interpreter -> enter interpreter path 
(.venv/Scripts/python.exe)

Install requirements:

>>> pip install -r requirements.txt

To leave:
>>> deactivate


Build documentation locally
---------------------------

cd to docs
>>> ./make html

To see the docs, open: miblab/docs/build/html/index.html

To make all autogenerated documentation from scratch, first delete all auto-generated content:

- delete docs/build
- delete all folders inside docs/source/generated/
- run docs/source/make_animations.py


Building release notes
----------------------
- Get a personal token on https://github.com/settings/tokens (does not need any permissions)
- Save the token in the environment variable GH_TOKEN. On windows:
>>> $env:GH_TOKEN='token'
- Build the changelog from current version to current dev. For instance:
>>> changelist openmiblab/miblab v0.0.10 main --format rst
- Copy-paste the terminal output in an .rst file and save it in docs/source/releases
- Edit the content of the file manually as needed
- Add an entry in the index of docs/source/releases


Updating the docs
-----------------

- Add any new contributors to the teams.inc file (About)
- Update the version number in conf.py
- Build release notes (see above), build and check the documentation,
  and push changes to dev. 
- Merge the dev branch with the main branch. 
  Check that the documentation builds OK. Check README. 
- Set the URL back to miblab.org in https://github.com/openmiblab/miblab/settings/pages


